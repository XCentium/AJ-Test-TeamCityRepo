"undefined" != typeof module && "undefined" != typeof exports && module.exports === exports && (module.exports = "monospaced.elastic"), angular.module("monospaced.elastic", []).constant("msdElasticConfig", { append: "" }).directive("msdElastic", ["$timeout", "$window", "msdElasticConfig", function (e, t, o) { "use strict"; return { require: "ngModel", restrict: "A, C", link: function (r, n, i, a) { function l() { var e = b; h = p, x = getComputedStyle(p), angular.forEach(S, function (t) { e += t + ":" + x.getPropertyValue(t) + ";" }), w.setAttribute("style", e) } function s() { var t, o, n, i, a; h !== p && l(), c || (c = !0, w.value = p.value + y, w.style.overflowY = p.style.overflowY, t = "" === p.style.height ? "auto" : parseInt(p.style.height, 10), o = getComputedStyle(p).getPropertyValue("width"), "px" === o.substr(o.length - 2, 2) && (i = parseInt(o, 10) - v.width, w.style.width = i + "px"), n = w.scrollHeight, n > k ? (n = k, a = "scroll") : C > n && (n = C), n += v.height, p.style.overflowY = a || "hidden", t !== n && (r.$emit("elastic:resize", u, t, n), p.style.height = n + "px"), e(function () { c = !1 }, 1, !1)) } function d() { c = !1, s() } var p = n[0], u = n; if ("TEXTAREA" === p.nodeName && t.getComputedStyle) { u.css({ overflow: "hidden", "overflow-y": "hidden", "word-wrap": "break-word" }); var g = p.value; p.value = "", p.value = g; var h, c, y = i.msdElastic ? i.msdElastic.replace(/\\n/g, "\n") : o.append, m = angular.element(t), b = "position: absolute; top: -999px; right: auto; bottom: auto;left: 0; overflow: hidden; -webkit-box-sizing: content-box;-moz-box-sizing: content-box; box-sizing: content-box;min-height: 0 !important; height: 0 !important; padding: 0;word-wrap: break-word; border: 0;", f = angular.element('<textarea aria-hidden="true" tabindex="-1" style="' + b + '"/>').data("elastic", !0), w = f[0], x = getComputedStyle(p), V = x.getPropertyValue("resize"), P = "border-box" === x.getPropertyValue("box-sizing") || "border-box" === x.getPropertyValue("-moz-box-sizing") || "border-box" === x.getPropertyValue("-webkit-box-sizing"), v = P ? { width: parseInt(x.getPropertyValue("border-right-width"), 10) + parseInt(x.getPropertyValue("padding-right"), 10) + parseInt(x.getPropertyValue("padding-left"), 10) + parseInt(x.getPropertyValue("border-left-width"), 10), height: parseInt(x.getPropertyValue("border-top-width"), 10) + parseInt(x.getPropertyValue("padding-top"), 10) + parseInt(x.getPropertyValue("padding-bottom"), 10) + parseInt(x.getPropertyValue("border-bottom-width"), 10) } : { width: 0, height: 0 }, I = parseInt(p.getAttribute("min-rows"), 10), z = parseInt(p.getAttribute("max-rows"), 10), E = parseInt(x.getPropertyValue("line-height"), 10), $ = parseInt(x.getPropertyValue("min-height"), 10), A = parseInt(x.getPropertyValue("height"), 10), C = $ && k > 0 ? Math.max($, A) - v.height : E * I, k = parseInt(x.getPropertyValue("max-height"), 10), S = ["font-family", "font-size", "font-weight", "font-style", "letter-spacing", "line-height", "text-transform", "word-spacing", "text-indent"]; p.setAttribute("rows", I), u.data("elastic") || (k = k && k > 0 ? k : E * z + parseInt(x.getPropertyValue("padding-top"), 10) + parseInt(x.getPropertyValue("padding-bottom"), 10), p.style.maxHeight = k + "px", w.parentNode !== document.body && angular.element(document.body).append(w), u.css({ resize: "none" === V || "vertical" === V ? "none" : "horizontal" }).data("elastic", !0), "onpropertychange" in p && "oninput" in p ? p.oninput = p.onkeyup = s : p.oninput = s, m.bind("resize", d), r.$watch(function () { return a.$modelValue }, function (e) { d() }), r.$on("elastic:adjust", function () { l(), d() }), e(s, 0, !1), r.$on("$destroy", function () { f.remove(), m.unbind("resize", d) })) } } } }]);
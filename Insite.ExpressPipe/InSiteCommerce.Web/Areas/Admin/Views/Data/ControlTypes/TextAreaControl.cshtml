@using Insite.Admin.Models
@model Insite.Admin.Models.ControlTypeViewModel<Insite.Admin.ControlTypes.TextAreaControl>

@if (Model.PropertyDefinition.CanEdit)
{
    var validator = Model.PropertyDefinition.DataTypeValidator as Insite.Admin.DataTypeValidators.StringValidator;
    var maxLength = validator != null ? validator.MaxLength : -1;
    var minLength = validator != null ? validator.MinLength : -1;
    var required = Model.PropertyDefinition.IsRequired;
    var regExp = validator != null ? validator.RegularExpression : null;

    @Html.Partial("FormControlContainer", new FormControlContainerModel
    {
        ControlTypeViewModel = Model,
        FieldContent = @<textarea id="@Model.Id"
                                  name="@Model.Id"
                                  class="@Model.ControlType.DisplayWidth.ToString().ToLower()"
                                  msd-elastic
                                  min-rows="@Model.ControlType.MinRows"
                                  max-rows="@Model.ControlType.MaxRows"
                                  ng-model="@Model.EditPageModelBinding"
                                  @(!regExp.IsBlank() ? "pattern=" + regExp : "")
                                  @(maxLength > 0 ? "maxlength=" + maxLength : "")
                                  @(minLength > 0 ? "minlength=" + minLength : "")
                                  @(required ? "required" : "")></textarea>
    })
}
else
{
    @Html.Partial("FormControlContainer", new FormControlContainerModel
    {
        ControlTypeViewModel = Model,
        FieldContent = @<div class="readonly">{{::@Model.EditPageModelBinding}}</div>
    })
}

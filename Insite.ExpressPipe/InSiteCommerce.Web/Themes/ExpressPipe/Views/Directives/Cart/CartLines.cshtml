@using Insite.Core.Providers


<ul>
	<li class="item-block item-header checkout-item hide-for-small-down">
        <div class="row">
            <div class="small-5 columns col-description">
                @T("Description")
            </div>
            <div class="small-2 columns col-availability">
                @T("Availability")
            </div>
            <div class="small-2 columns col-price">
                @T("Price")
            </div>
            <div class="small-1 columns col-qty">
                @T("Qty")
            </div>
            <div class="small-2 end columns col-total">
                @T("Total")
            </div>
        </div>
	</li>
	<li ng-repeat="cartLine in cart.cartLines | filter: quoteRequiredFilter" ng-if="(isCatalog == (cartLine.properties['productType'] == 'catalog')) || cart.status == 'QuoteProposed'">

		<div class="item-block checkout-item" ng-class="{open : (cartLine.id == vm.openLineNoteId), updating: cartLine.isQtyAdjusted && vm.isUpdateInProgress}">

			<div class="row">
				<span ng-if="cartLine.isPromotionItem && editable">@MessageProvider.Current.Cart_PromotionalItem</span>

				<a class="remove" ng-if="!cartLine.isPromotionItem && cart.canModifyOrder && editable" ng-click="vm.removeLine(cartLine)">
					<i class="fa fa-lg fa-remove"></i>
				</a>

				<div class="col-thumb xsmall-2 medium-1 columns">
					<isc-product-thumb product="cartLine"></isc-product-thumb>
				</div>

				<div class="col-description xsmall-9 medium-4 columns">
                    <div class="item-brand" ng-if="cartLine.properties['productType'] == 'special order'">
                        <span>@T("Custom Special Order")</span>
                    </div>
                    <div class="item-brand" ng-if="cartLine.properties['productType'] != 'special order'">
                        <span ng-bind="cartLine.properties['manufacturerName']"></span>
                    </div>

					<div class="item-name">
						<div class="item-name" ng-if="cartLine.properties['productType'] == 'special order'">
							<span ng-bind="cartLine.properties['sopDescription']"></span>
						</div>
						<div class="item-name" ng-if="cartLine.properties['productType'] != 'special order'">
							<a ng-href="{{cartLine.productUri}}">
								<span ng-bind="cartLine.shortDescription"></span>
							</a>
						</div>
					</div>

					<div class="item-num hide">
						{{cartLine.manufacturerItem}}
					</div>
					<span ng-if="!cartLine.isFixedConfiguration" ng-repeat="sectionOption in cartLine.sectionOptions">
						<span ng-bind="sectionOption.sectionName + ':' + sectionOption.optionName"></span>
					</span>

					<isc-product-name product="cartLine" no-link="true"></isc-product-name>

					<ul class="item-utilities inline-list hide-for-print">
						<li ng-if="cartLine.properties['specifications']"><a href="{{cartLine.properties.specifications.FilePath}}" title="@T("Product Spec")" ng-if="cartLine.properties['specifications']" target="_blank"><i class="fa fa-file"></i></a></li>
						<li ng-if="editable && cart.showLineNotes && !cartLine.isPromotionItem"><a data-cartnotes="true" ng-click="vm.notePanelClicked(cartLine.id)"><!--<i class="fa fa-sticky-note"></i>--> @T("Line Notes")</a></li>
                        <li ng-if="vm.isAuthenticated && cartLine.properties['productType'] != 'special order'"><a ng-click="vm.openWishListPopup(cartLine.productId, cartLine.qtyOrdered)" href="javascript:;"><!--<i class="fa fa-star"></i>--> @T("Add to List")</a></li>
					</ul>

					<div class="item-notes" ng-if="cart.showLineNotes && cartLine.notes.length > 0">
						<strong>@T("Line Notes"):</strong>
						<span ng-bind="cartLine.notes"></span>
					</div>

					<div class="item-actions" data-cartnotes="true">
						<div ng-if="cart.showCostCode" class="cost-code-field">
							<label for="cost-code" ng-bind="cart.costCodeLabel">:</label>
							<select ng-if="cart.canEditCostCode"
									ng-model="cartLine.costCode"
									ng-options="code.costCode as code.description for code in cart.costCodes"
									ng-change="vm.updateLine(cartLine, false)"></select>
							<span ng-if="!cart.canEditCostCode" ng-bind="cart.costCodeLabel"></span>
						</div>
						<div class="item-notes-field">
							<label>@T("Line Notes"):</label>
							<input data-linenote-input type="text"
								   id="{{cartLine.id + '_notes'}}"
								   name="{{cartLine.id + '_notes'}}"
								   ng-disabled="!cart.canModifyOrder"
								   ng-model="cartLine.notes"
								   ng-keypress="vm.notesKeyPress($event,cartLine)"
								   ng-blur="vm.updateLine(cartLine, false)" />
						</div>

					</div>

				</div>

				<div class="xsmall-3 medium-2 columns col-availability">
                    <span class="small-label">@T("Availability")</span>
                    <div class="availability" ng-if="cartLine.properties['productType'] != 'special order'">
                        <div ng-bind="cartLine.properties['qtyonhand']"></div>
                        <morsco-cart-availability-message availability="cartLine.availability" warehouses="warehouses" itemline="cartLine">
                        </morsco-cart-availability-message>
                        @*<div><a href="#" ng-click="vm.showProductAvailabilityPopup(cartLine, warehouses)" data-reveal-id="popup-availability">Check All Locations</a></div>*@
                    </div>
					<div class="availability" ng-if="cartLine.properties['productType'] != 'catalog'">&nbsp;</div>
				</div>

				<div class="xsmall-3 medium-2 columns col-price">
                    <span class="small-label">@T("Price")</span>
					<isc-product-price product="cartLine" ng-if="cartLine.properties['productType'] == 'catalog' || cart.status == 'QuoteProposed'"></isc-product-price>
                    <span data-tooltip aria-haspopup="true" class="has-tip" ng-if="cartLine.properties['productType'] != 'catalog' || cart.status == 'QuoteProposed' && cart.type !== 'Quote'" title="Add to cart and request a quote to get pricing">@T("Request Quote for Price")</span>

                    <isc-unit-of-measure-display product="cartLine" ng-if="cartLine.properties['productType'] == 'catalog' || cart.status == 'QuoteProposed'"> </isc-unit-of-measure-display>
					
                    <span ng-if="cartLine.properties['productType'] != 'catalog' || cart.status == 'QuoteProposed'">&nbsp;</span>

					<div class="quantity-pricing">
						<isc-quantity-break-pricing product-id="cartLine.id" break-prices="cartLine.breakPrices"></isc-quantity-break-pricing>
					</div>
				</div>

				<div class="xsmall-3 medium-1 columns col-qty">
					<span ng-if="!editable">
						<span class="small-label">@T("Qty")</span> <span ng-bind="cartLine.qtyOrdered"></span>
					</span>
					<span ng-if="editable">
                        <span class="small-label">@T("Qty")</span>
                        <input id="qty-{{cartLine.id}}" type="number" min="cartLine.properties.minimumSellQty" name="qty"
                               ng-change="vm.updateQty(cartLine, true)"
                               ng-model-options="{ updateOn: 'blur' }"
                               step="{{cartLine.properties.minimumSellQty}}" class="numerictextbox qty txt" ng-model="cartLine.qtyOrdered"
                               ng-disabled="!cart.canModifyOrder || cartLine.isPromotionItem || vm.isUpdateInProgress" />
					</span>
				</div>

				<div class="xsmall-3 small-3 medium-2 end columns col-total">
                    <span class="small-label">@T("Total")</span>
                    <span class="price" ng-if="!cartLine.quoteRequired && cartLine.properties['productType'] == 'catalog' || cart.status == 'QuoteProposed'" ng-bind="cartLine.pricing.extendedActualPriceDisplay"></span>
				</div>
			</div>

            <div class="refreshing" ng-if="vm.isUpdateInProgress">
                <i class="fa fa-refresh fa-spin fa-3x fa-fw"></i>
            </div>
		</div>

	</li>
</ul>

<div ng-cloak>
    <div class="cart-grid">
        <ul class="item-list cart-items">
            <li class="item-block item-header checkout-item row collapse hide-for-small-down">
                <div class="small-6 columns col-description">
                    @T("Description")
                </div>
                <div class="small-2 columns col-availability">
                    @T("Availability")
                </div>
                <div class="small-1 columns col-price">
                    @T("Price")
                </div>
                <div class="small-1 columns col-qty">
                    @T("Qty")
                </div>
				<div class="small-2 end columns col-total">
					@T("Total")
				</div>
            </li>
            <li ng-repeat="quoteLine in quote.quoteLineCollection">

                <div class="item-block checkout-item" ng-class="{open : (quoteLine.id == vm.openLineNoteId)}">

                    <div class="row collapse">
						<a class="remove" ng-click="removeline({quoteline:quoteLine})" ng-if="quote.properties['isEditable'] && quote.statusDisplay != 'Expired'">
							<i class="fa fa-lg fa-remove"></i>
						</a>

                        <div class="col-thumb xsmall-3 medium-1 columns">
                            <isc-product-thumb product="quoteLine"></isc-product-thumb>
                        </div>

                        <div class="col-description xsmall-9 medium-5 columns">
                            <div class="item-brand" ng-if="quoteLine.properties.productType != 'special order'">
                                <span ng-bind="quoteLine.properties['manufacturerName']"></span>
                            </div>
                            <div class="item-brand" ng-if="quoteLine.properties.productType == 'special order'">
                                <span>@T("Custom Special Order")</span>
                            </div>

							<div class="item-name" ng-if="quoteLine.properties.productType != 'special order'">
								<a id="requestedDetailsGridShortDescriptionLink_{{quoteLine.id}}" ng-href="{{quoteLine.productUri}}">
									<span ng-bind="quoteLine.shortDescription"></span>
									<span ng-if="!quoteLine.isFixedConfiguration" ng-repeat="sectionOption in quoteLine.sectionOptions">
										<br /><span ng-bind="sectionOption.sectionName + ':' + sectionOption.optionName"></span>
									</span>
								</a>
							</div>
							<div class="item-name" ng-if="quoteLine.properties.productType == 'special order'">
                                <span ng-bind="quoteLine.properties.sopDescription"></span>
							</div>

                            <isc-product-name product="quoteLine" no-link="true"></isc-product-name>

                            <ul class="item-utilities inline-list">
                                <li ng-if="quoteLine.properties['specifications']"><a href="{{quoteLine.properties.specifications.FilePath}}" title="@T("Product Spec")" ng-if="quoteLine.properties['specifications']" target="_blank"><i class="fa fa-file"></i></a></li>
                                <li ng-if="quote.showLineNotes && !quoteLine.isPromotionItem"><a data-cartnotes="true" ng-click="vm.notePanelClicked(quoteLine.id)"><!--<i class="fa fa-sticky-note"></i>--> @T("Line Notes")</a></li>
                            </ul>

                            <div class="item-notes" ng-if="quote.showLineNotes && quoteLine.notes.length > 0">
                                <strong>@T("Item Notes"):</strong>
                                <span ng-bind="quoteLine.notes"></span>
                            </div>

                            <div class="item-actions" data-cartnotes="true">
                                <div class="item-notes-field">
                                    <label>@T("Line Notes"):</label>
									<input data-linenote-input type="text"
										   id="{{quoteLine.id + '_notes'}}"
										   name="{{quoteLine.id + '_notes'}}"
										   ng-disabled="!quote.canModifyOrder"
										   ng-model="quoteLine.notes"
										   ng-keypress="vm.quantityKeyPress($event, quoteLine)"
										   ng-blur="vm.updateLine(quoteLine, true)" />
                                </div>
                            </div>

                            <div class="cost-code" ng-if="quote.showCostCode && quoteLine.costCode.length > 0">
                                <strong><span ng-bind="quote.costCodeLabel"></span>:</strong>
                                <span ng-bind="quoteLine.costCode"></span>
                            </div>
                        </div>

                        <div class="col-availability xsmall-3 medium-2 columns">
                            <div class="availability" @*ng-if="quoteLine.properties['productType'] == 'catalog'"*@>
                                <div ng-bind="quoteLine.properties['qtyonhand']"></div>
                                <morsco-cart-availability-message availability="quoteLine.availability"
                                                                  itemline="quoteLine"
                                                                  warehouses="warehouses">
                                </morsco-cart-availability-message>
                            </div>
                            <div class="availability" ng-if="quoteLine.properties['productType'] != 'catalog'">&nbsp;</div>
                        </div>

                        <div class="col-price xsmall-3 medium-1 columns">
                            <div ng-if="quoteLine.properties['productType'] == 'catalog' || quote.status == 'QuoteProposed' || quote.status == 'QuoteSubmitted' || quote.status == 'QuoteRequested'">
                                <isc-product-price product="quoteLine"></isc-product-price>
                                <isc-unit-of-measure-display product="quoteLine"></isc-unit-of-measure-display>
                            </div>
                            <span data-tooltip aria-haspopup="true" class="has-tip" ng-if="quoteLine.properties['productType'] != 'catalog' && quote.status != 'QuoteProposed' && quote.status != 'QuoteSubmitted'" title="Add to cart and request a quote to get pricing">@T("Request Quote for Price")</span>
                            
                            <div class="quantity-pricing">
                                <isc-quantity-break-pricing product-id="quoteLine.productId" break-prices="quoteLine.breakPrices"></isc-quantity-break-pricing>
                            </div>
                        </div>

                        <div class="col-qty xsmall-3 medium-1 columns">
							<span ng-if="!quote.properties['isEditable']">
								<span ng-bind="quoteLine.qtyOrdered"></span>
							</span>
							<span ng-if="quote.properties['isEditable']">

                                <input id="inputQty{{quoteLine.id}}" type="number" min="quoteLine.properties.minimumSellQty" name="qty numerictextbox"
                                       ng-change="vm.updateQty(quoteLine)"
                                       ng-model-options="{ updateOn: 'blur' }"
                                       step="{{quoteLine.properties.minimumSellQty}}" class="qty numerictextbox txt" ng-model="quoteLine.qtyOrdered" />

								@*<input type="number" class="numerictextbox qty txt" min="1"
									   ng-model="quoteLine.qtyOrdered"
									   ng-keypress="vm.quantityKeyPress($event, quoteLine)"
									   ng-blur="vm.updateLine(quoteLine, true)" />*@
							</span>
                        </div>

                        <div class="col-total xsmall-3 medium-2 columns">
                            <span ng-if="quoteLine.properties['productType'] == 'catalog' || 
                                        (quoteLine.properties['productType'] != 'catalog' && (quote.status == 'QuoteSubmitted' || quote.status == 'QuoteProposed'))" 
                                  class="price" ng-bind="quoteLine.pricing.extendedActualPriceDisplay"></span>
                        </div>

                    </div>

                </div>

            </li>

        </ul>
    </div>
    <div class="order-subtotal-grid">
        <div class="row" ng-if="quote.statusDisplay != 'QuoteRequested'">
            <div class="small-5 small-offset-7 end columns text-right">
                <small>
                    @T("Subtotal")<ng-pluralize count="quote.totalCountDisplay"
                                                when="{'0': 'No items',
                      'one': '(1 item)',
                      'other': '({} items)'}">
                    </ng-pluralize>:
                </small>
                <strong id="totalPrice" ng-bind="quote.orderSubTotalDisplay"></strong>
            </div>
        </div>
    </div>
</div>